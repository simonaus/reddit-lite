(this["webpackJsonpreddit-lite"]=this["webpackJsonpreddit-lite"]||[]).push([[0],{155:function(e,t,a){"use strict";a.r(t);a(62);var s=a(1),r=a.n(s),n=a(30),i=a.n(n),d=(a(67),a(68),a(10)),c=a(2),o=a(0),l=function(){var e=Object(c.b)();return Object(o.jsxs)("div",{className:"Header",children:[Object(o.jsxs)(d.b,{to:"/",onClick:function(){e({type:"newsFeed/changeIsSearching",payload:!1}),e({type:"newsFeed/updateUrl",payload:"https://www.reddit.com/"}),e({type:"newsFeed/changeActiveSubreddit",payload:"Homepage"})},className:"icon",children:[Object(o.jsx)("img",{src:"iconfinder_feather_2561433icon.png"}),Object(o.jsx)("p",{className:"iconTitle",children:"reddit-lite"})]}),Object(o.jsxs)("div",{className:"nav",children:[Object(o.jsx)(d.b,{className:"anchor",to:"/",children:Object(o.jsx)("h2",{className:"link",children:"Homepage"})}),Object(o.jsx)(d.b,{onClick:function(){e({type:"newsFeed/clearPosts",payload:[]})},className:"anchor",to:"/subredditsubscriber",children:Object(o.jsx)("h2",{className:"link",children:"Subreddit Subscriber"})})]})]})},u=function(e){var t=e.displayName,a=e.urlName,s=Object(c.b)();return Object(o.jsx)(d.b,{className:"anchor",to:"/",children:Object(o.jsx)("p",{onClick:function(){s({type:"newsFeed/changeIsSearching",payload:!1}),s({type:"newsFeed/updateUrl",payload:"https://www.reddit.com/"+a}),s({type:"newsFeed/changeActiveSubreddit",payload:t})},className:"SubredditTitle",children:t})})},b=function(){var e=Object(c.c)((function(e){return e.subredditList}));return Object(o.jsxs)("div",{className:e.isToggle?"SubredditList":"SubredditList toggleOff",children:[Object(o.jsx)("p",{className:"subredditListTitle",children:"Check out these subreddits"}),e.subreddits.map((function(e){return Object(o.jsx)(u,{displayName:e.displayName,urlName:e.urlName},e.displayName)})),Object(o.jsx)("p",{className:"addSubreddit",children:"Or add your own using the subreddit subscriber"})]})},p=a(15),g=a.n(p),m=a(21),h=a(22),j=function(e){var t=e.title,a=e.subredditName,s=e.votes,r=e.image,n=e.postTitleClass,i=e.permalink,l=(Object(c.c)((function(e){return e.postDetail})),Object(c.b)());return Object(o.jsx)("div",{onClick:function(){var e="https://www.reddit.com"+i+".json";sessionStorage.setItem("url",e),l({type:"postDetail/updateUrl",payload:e}),l({type:"newsFeed/clearPosts",payload:[]})},className:n,children:Object(o.jsxs)(d.b,{to:"/postdetail",children:[Object(o.jsx)("p",{className:"subreddit",children:a}),Object(o.jsx)("h3",{children:t}),Object(o.jsx)("div",{children:function(){if(r)return Object(o.jsx)("img",{src:r})}()}),Object(o.jsxs)("p",{className:"votes",children:["Votes: ",s]})]})})},f=a(32),y=function(e){var t=e.placeholder,a=e.location,r=Object(s.useState)(""),n=Object(f.a)(r,2),i=n[0],d=n[1],l=Object(c.b)(),u=Object(c.c)((function(e){return e}));return Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i&&(l({type:"subredditList/toggleOff"}),l({type:"newsFeed/toggleOff"}),l({type:"subredditSubscriber/toggleOff"}),l({type:"newsFeed/changeIsSearching",payload:!0}),l("subredditSubscriber"===a?{type:"subredditSubscriber/changeSearchQuery",payload:i}:{type:"newsFeed/updateUrl",payload:u.newsFeed.url+"/search/.json?restrict_sr=1&q="+i}),d(""))},className:"SearchBar",children:[Object(o.jsx)("input",{value:i,placeholder:t,onChange:function(e){d(e.target.value)}}),Object(o.jsx)("button",{type:"submit",children:"Search"})]})},O=function(){var e=Object(c.c)((function(e){return e.newsFeed})),t=Object(c.b)(),a=function(){var a=Object(h.a)(g.a.mark((function a(){var s,r,n,i,d,c,o,l,u,b=arguments;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=b.length>0&&void 0!==b[0]?b[0]:"",a.prev=1,window.scrollTo(0,0),t({type:"newsFeed/changeIsLoading",payload:!0}),e.isSearching||(s="/.json"+s),a.prev=5,a.next=8,fetch(e.url+s);case 8:r=a.sent,a.next=16;break;case 11:return a.prev=11,a.t0=a.catch(5),t({type:"newsFeed/changeIsLoading",payload:!1}),alert("Error: Unable to access reddit servers using URL provided"),a.abrupt("return");case 16:return a.next=18,r.json();case 18:n=a.sent,i=n.data.children,(d={posts:[],after:"",before:""}).before=n.data.before,d.after=n.data.after,c=0,o=Object(m.a)(i);try{for(o.s();!(l=o.n()).done;)u=l.value,d.posts[c]={title:u.data.title,subredditName:u.data.subreddit_name_prefixed,image:u.data.preview,votes:u.data.score,id:u.data.id,permalink:u.data.permalink},u.data.preview&&(0===u.data.preview.images[0].resolutions.length?d.posts[c].image=u.data.preview.images[0].source.url.replaceAll("&amp;","&"):d.posts[c].image=u.data.preview.images[0].resolutions[u.data.preview.images[0].resolutions.length-1].url.replaceAll("&amp;","&")),c++}catch(p){o.e(p)}finally{o.f()}t({type:"newsFeed/changeIsLoading",payload:!1}),t({type:"newsFeed/loadPosts",payload:d}),a.next=34;break;case 30:a.prev=30,a.t1=a.catch(1),t({type:"newsFeed/changeIsLoading",payload:!1}),alert("Error: Unable to read data from reddit servers");case 34:case"end":return a.stop()}}),a,null,[[1,30],[5,11]])})));return function(){return a.apply(this,arguments)}}();Object(s.useEffect)((function(){a(),t({type:"newsFeed/changePageNumber",payload:1})}),[e.url]);var r=function(){if(!e.isLoading){var s=e.isSearching?"&":"?";a(s+"after="+e.after+"&count="+25*e.pageNumber),t({type:"newsFeed/changePageNumber",payload:e.pageNumber+1})}},n=function(){if(!e.isLoading){var s=e.isSearching?"&":"?";a(s+"before="+e.before+"&count="+25*(e.pageNumber-1)),t({type:"newsFeed/changePageNumber",payload:e.pageNumber-1})}};return Object(o.jsxs)("div",{className:e.isToggle?"NewsFeed toggleOn":"NewsFeed",children:[Object(o.jsx)("h1",{children:e.activeSubreddit}),Object(o.jsx)(y,{className:"SearchBar",location:"newsFeed",placeholder:"Search the "+e.activeSubreddit+" Newsfeed"}),Object(o.jsxs)("div",{className:e.posts.length?"page":"hidden",children:[1!==e.pageNumber?Object(o.jsx)("button",{type:"button",onClick:n,children:"<"}):Object(o.jsx)("p",{}),Object(o.jsxs)("p",{children:["Page ",e.pageNumber]}),Object(o.jsx)("button",{type:"button",className:e.after?"":"hidden",onClick:r,children:">"})]}),e.posts.map((function(t){return Object(o.jsx)(j,{className:"PostTitle",permalink:t.permalink,title:t.title,subredditName:t.subredditName,image:t.image,votes:t.votes,postTitleClass:e.isLoading?"hidden":"PostTitle"},t.id)})),Object(o.jsxs)("div",{className:e.isLoading||!e.posts.length?"hidden":"page",children:[1!==e.pageNumber?Object(o.jsx)("button",{type:"button",onClick:n,children:"<"}):Object(o.jsx)("p",{}),Object(o.jsxs)("p",{className:e.posts.length<5?"hidden":"",children:["Page ",e.pageNumber]}),Object(o.jsx)("button",{type:"button",className:e.after?"":"hidden",onClick:r,children:">"})]}),Object(o.jsx)("p",{className:e.isLoading?"loading":"hidden",children:"Loading..."}),Object(o.jsx)("p",{className:e.posts.length||e.isLoading?"hidden":"loading",children:"No results found"})]})},x=a(4),v=function(e){var t,a=e.name,s=e.numOfSubscribers,r=e.subredditClass,n=Object(c.c)((function(e){return e.subredditList})),i=Object(c.b)(),l=!1,u=Object(m.a)(n.subreddits);try{for(u.s();!(t=u.n()).done;){t.value.urlName===a&&(l=!0)}}catch(b){u.e(b)}finally{u.f()}return Object(o.jsxs)("div",{className:r,children:[Object(o.jsx)(d.b,{className:"subredditLink",to:"/",children:Object(o.jsxs)("div",{onClick:function(){i({type:"newsFeed/changeIsSearching",payload:!1}),i({type:"newsFeed/updateUrl",payload:"https://www.reddit.com/"+a}),i({type:"newsFeed/changeActiveSubreddit",payload:a})},className:"subredditDetail",children:[Object(o.jsx)("h3",{children:a}),Object(o.jsxs)("p",{className:"numOfSubscribers",children:["Total subscribers: ",s]})]})}),Object(o.jsx)("p",{className:l?"remove pointerMouse":"add pointerMouse",onClick:function(){i(l?{type:"subredditList/removeSubreddit",payload:a}:{type:"subredditList/addSubreddit",payload:{urlName:a,displayName:a,key:a}})},children:l?"-":"+"})]})},N=function(){var e=Object(c.c)((function(e){return e.subredditSubscriber})),t=Object(c.b)(),a=function(){var a=Object(h.a)(g.a.mark((function a(){var s,r,n,i,d,c,o,l,u,b,p,h=arguments;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=h.length>0&&void 0!==h[0]?h[0]:"",a.prev=1,e.searchQuery){a.next=4;break}return a.abrupt("return");case 4:return window.scrollTo(0,0),t({type:"subredditSubscriber/changeIsLoading",payload:!0}),a.prev=6,a.next=9,fetch("https://www.reddit.com/search/.json?q="+e.searchQuery+"&type=sr%2Cuser"+s);case 9:r=a.sent,a.next=17;break;case 12:return a.prev=12,a.t0=a.catch(6),t({type:"subredditSubscriber/changeIsLoading",payload:!1}),alert("Error: Unable to access reddit servers using URL provided"),a.abrupt("return");case 17:return a.next=19,r.json();case 19:n=a.sent,i=n.data.children,d=n.data.before,c=n.data.after,o={subreddits:[],after:c,before:d},l=0,u=Object(m.a)(i);try{for(u.s();!(b=u.n()).done;)(p=b.value).data.display_name_prefixed?o.subreddits[l]={name:p.data.display_name_prefixed,numOfSubscribers:p.data.subscribers}:l--,p.data.subscribers||(o.subreddits[l].numOfSubscribers="Private"),l++}catch(g){u.e(g)}finally{u.f()}t({type:"subredditSubscriber/changeIsLoading",payload:!1}),t({type:"subredditSubscriber/loadSubreddits",payload:o}),a.next=35;break;case 31:a.prev=31,a.t1=a.catch(1),t({type:"subredditSubscriber/changeIsLoading",payload:!1}),alert("Error: Unable to read data from reddit servers");case 35:case"end":return a.stop()}}),a,null,[[1,31],[6,12]])})));return function(){return a.apply(this,arguments)}}();Object(s.useEffect)((function(){t({type:"subredditSubscriber/changePageNumber",payload:1}),a()}),[e.searchQuery]);var r=function(){e.isLoading||""===e.searchQuery||(a("&after="+e.after+"&count="+25*e.pageNumber),t({type:"subredditSubscriber/changePageNumber",payload:e.pageNumber+1}))},n=function(){e.isLoading||(a("&before="+e.before+"&count="+25*(e.pageNumber-1)),t({type:"subredditSubscriber/changePageNumber",payload:e.pageNumber-1}))};return Object(o.jsxs)("div",{className:e.isToggle?"NewsFeed toggleOn":"NewsFeed",children:[Object(o.jsx)("h1",{children:"Subreddit Subscriber"}),Object(o.jsx)(y,{className:"SearchBar",location:"subredditSubscriber",placeholder:"Search for a subreddit"}),Object(o.jsxs)("div",{className:e.searchQuery&&e.after?"page":"hidden",children:[1!==e.pageNumber?Object(o.jsx)("button",{type:"button",onClick:n,children:"<"}):Object(o.jsx)("p",{}),Object(o.jsxs)("p",{children:["Page ",e.pageNumber]}),Object(o.jsx)("button",{type:"button",onClick:r,children:">"})]}),e.subreddits.map((function(t){return Object(o.jsx)(v,{className:"PostTitle",name:t.name,numOfSubscribers:t.numOfSubscribers,subredditClass:e.isLoading?"hidden":"Subreddit"},t.name)})),Object(o.jsxs)("div",{className:!e.isLoading&&e.searchQuery&&e.after?"page":"hidden",children:[1!==e.pageNumber?Object(o.jsx)("button",{type:"button",onClick:n,children:"<"}):Object(o.jsx)("p",{}),Object(o.jsxs)("p",{children:["Page ",e.pageNumber]}),Object(o.jsx)("button",{type:"button",onClick:r,children:">"})]}),Object(o.jsx)("p",{className:e.isLoading?"loading":"hidden",children:"Loading..."}),Object(o.jsx)("p",{className:e.subreddits.length||e.isLoading?"hidden":"loading",children:"No results found"})]})},S=a(31),w=a.n(S),L=function e(t){var a=t.body,r=t.commentLevel,n=t.user,i=t.votes,d=t.replies,c=t.hidden,l=Object(s.useState)(!0),u=Object(f.a)(l,2),b=u[0],p=u[1];!b&&c&&p(!0);var g=b?"Show replies":"Hide replies",m=100-5*r+"%",h=5*r+"%",j=r?"0px":"10px";d&&0!==d.length||(d=!1);var y=null;r||(y="commentContainer"),c&&(y="hidden");return void 0!==a?Object(o.jsxs)("div",{className:y,children:[Object(o.jsxs)("div",{className:"Comment",style:{width:m,marginLeft:h,marginTop:j},children:[Object(o.jsx)("p",{className:"commentUser",children:n}),Object(o.jsx)("p",{className:"commentVotes",children:i}),Object(o.jsx)(w.a,{className:"commentBody",source:a})]}),Object(o.jsx)("p",{className:"pointerMouse",style:{marginLeft:h},onClick:function(){p(!b)},children:d?g:""}),d?d.map((function(t){return Object(o.jsx)(e,{body:t.body,commentLevel:t.commentLevel,user:"Posted by"+t.user,votes:t.votes,replies:t.replies,hidden:b},t.id)})):""]}):null},k=function(){var e=Object(c.c)((function(e){return e.postDetail})),t=Object(c.b)(),a=function(){var a=Object(h.a)(g.a.mark((function a(){var s,r,n,i,d,c,o,l;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,window.scrollTo(0,0),t({type:"postDetail/changeIsLoading",payload:!0}),s=e.url?e.url:sessionStorage.getItem("url")?sessionStorage.getItem("url"):"",a.prev=4,a.next=7,fetch(s);case 7:r=a.sent,a.next=15;break;case 10:return a.prev=10,a.t0=a.catch(4),t({type:"postDetail/changeIsLoading",payload:!1}),alert("Error: Unable to access reddit servers using URL provided"),a.abrupt("return");case 15:return a.next=17,r.json();case 17:n=a.sent,i=n[0].data.children[0].data,d={title:i.title,user:"Posted by "+i.author,body:i.selftext.replaceAll("&gt;",">").replaceAll("&amp;#x200b;","").replaceAll("&amp;#x200B;",""),subreddit:i.subreddit_name_prefixed},i.preview&&i.preview.images&&(d.image=i.preview.images[0].resolutions[i.preview.images[0].resolutions.length-1].url.replaceAll("&amp;","&")),("link"===i.post_hint||"image"!==i.post_hint&&i.url_overridden_by_dest)&&(d.link=i.url_overridden_by_dest),t({type:"postDetail/loadPost",payload:d}),c=n[1].data.children,o=function e(t,a){return t.map((function(t){a>12&&(a=12);var s={user:t.data.author,votes:t.data.score,body:t.data.body,commentLevel:a,id:t.data.id};if(s.body&&(s.body=s.body.replaceAll("&gt;",">").replaceAll("&amp;#x200b;","").replaceAll("&amp;#x200B;","")),t.data.replies){var r=t.data.replies.data.children.filter((function(e){return"t1"===e.kind})),n=e(r,a+1);s.replies=n}return s}))},l=o(c,0),t({type:"postDetail/loadComments",payload:l}),t({type:"postDetail/changeIsLoading",payload:!1}),a.next=34;break;case 30:a.prev=30,a.t1=a.catch(0),t({type:"postDetail/changeIsLoading",payload:!1}),alert("Error: Unable to read data from reddit servers");case 34:case"end":return a.stop()}}),a,null,[[0,30],[4,10]])})));return function(){return a.apply(this,arguments)}}();return Object(s.useEffect)((function(){return a(),function(){t({type:"postDetail/resetSlice"})}}),[]),Object(o.jsxs)("div",{className:e.isToggle?"PostDetail toggleOn":"PostDetail",children:[Object(o.jsx)("p",{className:e.isLoading?"loading":"hidden",children:"Loading..."}),Object(o.jsx)("h1",{className:"postDetailSubredditTitle",children:e.post.subreddit}),Object(o.jsx)("h1",{children:e.post.title}),Object(o.jsx)("p",{className:"user",children:e.post.user}),Object(o.jsx)("a",{href:e.post.link,className:"postlink",children:e.post.link}),Object(o.jsx)("img",{src:e.post.image}),Object(o.jsx)(w.a,{className:e.post.body?"body":"body hidden",source:e.post.body}),Object(o.jsx)("h1",{className:e.isLoading?"hidden":"",id:"commentsHeading",children:0===e.comments.length?"No comments posted":"Comments"}),e.comments.map((function(e){return Object(o.jsx)(L,{body:e.body,commentLevel:e.commentLevel,user:"Posted by"+e.user,votes:e.votes,replies:e.replies,hidden:!1},e.id)}))]})},T=a(13),F=Object(T.b)({name:"newsFeed",initialState:{searchTerm:"",posts:[],pageNumber:1,after:"",before:"",isLoading:!1,isSearching:!1,url:"https://www.reddit.com",activeSubreddit:"Homepage",isToggle:!1},reducers:{loadPosts:function(e,t){e.posts=t.payload.posts,e.after=t.payload.after,e.before=t.payload.before},changePageNumber:function(e,t){e.pageNumber=t.payload},changeIsLoading:function(e,t){e.isLoading=t.payload},updateUrl:function(e,t){e.url=t.payload},changeIsSearching:function(e,t){e.isSearching=t.payload},changeActiveSubreddit:function(e,t){e.activeSubreddit=t.payload},toggle:function(e,t){e.isToggle=!e.isToggle},toggleOff:function(e,t){e.isToggle=!1},clearPosts:function(e,t){e.posts=t.payload}}}),C=(F.actions.loadPosts,F.reducer),P=Object(T.b)({name:"subredditSubscriber",initialState:{searchQuery:"",subreddits:[],isLoading:!1,pageNumber:1,before:"",after:"",isToggle:!1},reducers:{loadSubreddits:function(e,t){e.subreddits=t.payload.subreddits,e.after=t.payload.after,e.before=t.payload.before},changeIsLoading:function(e,t){e.isLoading=t.payload},changeSearchQuery:function(e,t){e.searchQuery=t.payload},changePageNumber:function(e,t){e.pageNumber=t.payload},toggle:function(e,t){e.isToggle=!e.isToggle},toggleOff:function(e,t){e.isToggle=!1}}}),I=(P.actions.loadSubreddits,P.reducer),_=Object(T.b)({name:"subredditList",initialState:{subreddits:[{urlName:"",displayName:"Homepage"},{urlName:"r/worldnews",displayName:"r/worldnews"},{urlName:"r/funny",displayName:"r/funny"},{urlName:"r/askreddit",displayName:"r/askreddit"}],isToggle:!1},reducers:{addSubreddit:function(e,t){e.subreddits.push(t.payload)},removeSubreddit:function(e,t){e.subreddits=e.subreddits.filter((function(e){return e.urlName!==t.payload}))},toggle:function(e,t){e.isToggle=!e.isToggle},toggleOff:function(e,t){e.isToggle=!1}}}),D=(_.actions.addSubreddit,_.reducer),U=Object(T.b)({name:"postDetail",initialState:{url:"",isLoading:!1,post:{title:"",user:"",body:"",image:"",link:"",subreddit:""},comments:[],isToggle:!1},reducers:{loadPost:function(e,t){e.post=t.payload},loadComments:function(e,t){e.comments=t.payload},updateUrl:function(e,t){e.url=t.payload},changeIsLoading:function(e,t){e.isLoading=t.payload},resetSlice:function(e,t){e.post={},e.comments=[]},toggle:function(e,t){e.isToggle=!e.isToggle}}}),A=(U.actions.loadPost,U.reducer),E=Object(T.a)({reducer:{newsFeed:C,subredditSubscriber:I,subredditList:D,postDetail:A}});var Q=function(){return Object(c.c)((function(e){return e})),Object(o.jsx)(d.a,{children:Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)("header",{children:Object(o.jsx)(l,{})}),Object(o.jsxs)("main",{children:[Object(o.jsx)("input",{type:"image",className:"toggleButton",onClick:function(){E.dispatch({type:"subredditList/toggle"}),E.dispatch({type:"subredditSubscriber/toggle"}),E.dispatch({type:"newsFeed/toggle"}),E.dispatch({type:"postDetail/toggle"})},src:E.getState().subredditList.isToggle?"iconfinder_Close_Icon_Dark_1398917.png":"iconfinder_magnifying-glass-zoom-in-plus_3643761.png"}),Object(o.jsx)(b,{className:"SubredditList"}),Object(o.jsx)(x.a,{path:"/",exact:!0,component:O}),Object(o.jsx)(x.a,{path:"/subredditsubscriber",exact:!0,component:N}),Object(o.jsx)(x.a,{path:"/postdetail",exact:!0,component:k})]})]})})},B=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,156)).then((function(t){var a=t.getCLS,s=t.getFID,r=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),s(e),r(e),n(e),i(e)}))};i.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(c.a,{store:E,children:Object(o.jsx)(Q,{})})}),document.getElementById("root")),B()},62:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){}},[[155,1,2]]]);
//# sourceMappingURL=main.b79f85ba.chunk.js.map